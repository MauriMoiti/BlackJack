(()=>{"use strict";let e=["C","D","H","S"],t=["A","J","Q","K"],r=[],l=[],n=[],a=[];document.querySelector(".title-blackjack");let d=document.querySelector("#buttonNewGame"),i=document.querySelector("#buttonGetCard"),s=document.querySelector("#buttonStopCards"),c=document.querySelector(".section-players-container");d.addEventListener("click",()=>{b()}),i.addEventListener("click",()=>{p()}),s.addEventListener("click",()=>{y()});let o=(e=2)=>{r=g();for(let t=0;t<e;t++)l.push(0),n.push(!1),a.push(!1);n[0]=!0,u(e,l)},u=(e,t)=>{for(let r=0;r<e;r++){let l=document.createElement("div"),n=document.createElement("div"),a=document.createElement("h1"),d=document.createElement("div");c.appendChild(l),l.appendChild(n),n.appendChild(a),n.appendChild(d),l.classList.add("row","container","mt-4"),n.classList.add("col"),a.classList.add("title-player",`title-player${r+1}`),d.classList.add("row","player-container-cards"),d.setAttribute("id","player-cards"),a.innerText=`Player ${[r+1]} - ${t[r]}`}},p=()=>{let e=Array.from(document.querySelectorAll(".title-player")),t=Array.from(document.querySelectorAll(".player-container-cards")),r=m(),d=n.findIndex(e=>!0===e),s=d+1<n.length?d+1:0;if(l[d]+=C(r),e[d].innerText=`Player ${[d+1]} - ${l[d]}`,S(r,t[d]),console.log("index actual:",d),console.log("index siguiente:",s),l[s]<21&&!1===a[s])console.log("true"),h(d,s);else{if(l.every(e=>e>=21)||a.every(e=>!0===e))return i.disabled=!0;let c=f(s,d,l,a,$=1);h(d,c)}},$=1;function f(e,t,r,l){console.log($);let n=(t+$)%r.length;return r[n]>=21||!0===l[n]?($++,f(e,t,r,l)):n}let h=(e,t)=>(n[e]=!1,n[t]=!0,n),y=()=>{let e=n.findIndex(e=>!0===e),t=e+1<n.length?e+1:0;return a[e]=!0,h(e,t),n},g=()=>{r=[];for(let l=2;l<=10;l++)for(let n of e)r.push(`${l}${n}`);for(let a of e)for(let d of t)r.push(`${d}${a}`);return _.shuffle(r)},m=()=>0!==r.length?r.shift():console.error("There aren't more cards in the deck"),C=e=>{let t=e.substring(0,e.length-1);return isNaN(t)?"A"===t?11:10:Number(t)},S=(e,t)=>{let r=document.createElement("img");r.classList.add("card"),r.src=`assets/desk/${e}.png`,r.alt=`ImageOfCard:${e}`,t.appendChild(r)},b=()=>(o(),playerPoints=0,player2Points=0,turnPlayerObj={turnPlayer1:!0,turnPlayer2:!0,stop1:!1,stop2:!1},showPoints[0].innerText=0,showPoints[1].innerText=0,i.disabled=!1)})();